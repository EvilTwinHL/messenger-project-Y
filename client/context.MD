# üóÇ MESSENGER Y ‚Äî PROJECT CONTEXT v2.3.5
> –í—Å—Ç–∞–≤–ª—è–π —Ü–µ–π —Ñ–∞–π–ª –ø–µ—Ä—à–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —É –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ.
> –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –¥–æ–¥–∞–≤–∞–π –¢–Ü–õ–¨–ö–ò —Ç–æ–π —Ñ–∞–π–ª, –∑ —è–∫–∏–º –∑–∞—Ä–∞–∑ –ø—Ä–∞—Ü—é—î—à.

---

## üì¶ –°–¢–ï–ö

| –®–∞—Ä | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è |
|-----|-----------|
| –ö–ª—ñ—î–Ω—Ç | Flutter 3.x (Android, iOS, Windows) |
| –°–µ—Ä–≤–µ—Ä | Node.js 20 + Express 5 + Socket.IO 4.8 |
| –ë–î | Firebase Firestore |
| –°—Ö–æ–≤–∏—â–µ | Firebase Storage |
| Push | FCM multicast (—Ñ—ñ–ª—å—Ç—Ä –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö ‚úÖ) |
| Auth | –ù—ñ–∫–Ω–µ–π–º + –∞–≤–∞—Ç–∞—Ä (JWT ‚Äî –§–∞–∑–∞ 1, —â–µ –Ω–µ –∑—Ä–æ–±–ª–µ–Ω–æ) |
| OTA | Shorebird Code Push |
| Real-time | Socket.IO rooms + Firestore StreamBuilder |
| Config | flutter_dotenv (.env —Ñ–∞–π–ª) |

---

## üóÇ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–Ü–í (–∞–∫—Ç—É–∞–ª—å–Ω–∞ –ø—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É)

```
client/
‚îú‚îÄ‚îÄ .env                           # SERVER_URL=https://pproject-y.onrender.com
‚îú‚îÄ‚îÄ pubspec.yaml
‚îî‚îÄ‚îÄ lib/
    ‚îú‚îÄ‚îÄ config/
    ‚îÇ   ‚îî‚îÄ‚îÄ app_config.dart        # AppConfig.serverUrl (–∑ .env) + AppConfig.firebaseAvailable
    ‚îú‚îÄ‚îÄ services/
    ‚îÇ   ‚îî‚îÄ‚îÄ socket_service.dart    # SocketService singleton ‚Äî –≤—Å—ñ Socket.IO –º–µ—Ç–æ–¥–∏
    ‚îú‚îÄ‚îÄ utils/
    ‚îÇ   ‚îî‚îÄ‚îÄ date_utils.dart        # ChatDateUtils: formatTime, dateLabel, parseDate, isSameDay
    ‚îú‚îÄ‚îÄ widgets/
    ‚îÇ   ‚îú‚îÄ‚îÄ message_bubble.dart    # MessageBubble
    ‚îÇ   ‚îú‚îÄ‚îÄ swipe_to_reply.dart    # SwipeToReply
    ‚îÇ   ‚îú‚îÄ‚îÄ typing_indicator.dart  # TypingIndicator
    ‚îÇ   ‚îú‚îÄ‚îÄ date_separator.dart    # DateSeparator
    ‚îÇ   ‚îú‚îÄ‚îÄ reply_preview.dart     # ReplyPreview
    ‚îÇ   ‚îî‚îÄ‚îÄ reaction_widgets.dart  # ReactionPicker + ReactionsDisplay
    ‚îú‚îÄ‚îÄ main.dart                  # MyApp, main(), ChatScreen, AppColors, GlassBox
    ‚îú‚îÄ‚îÄ home_screen.dart           # HomeScreen + _OvalNavBar
    ‚îú‚îÄ‚îÄ login_screen.dart          # LoginScreen (—î–¥–∏–Ω–µ –º—ñ—Å—Ü–µ!)
    ‚îú‚îÄ‚îÄ search_screen.dart         # SearchUserScreen
    ‚îú‚îÄ‚îÄ settings_screen.dart       # SettingsScreen ‚Äî OTA, logout (–±–µ–∑ leading —É AppBar!)
    ‚îú‚îÄ‚îÄ signal_context_menu.dart   # SignalContextMenu overlay
    ‚îú‚îÄ‚îÄ audio_player_widget.dart   # AudioMessagePlayer + WaveformPainter
    ‚îú‚îÄ‚îÄ voice_recorder.dart        # VoiceRecorder widget
    ‚îî‚îÄ‚îÄ theme.dart                 # SignalColors, AppSizes, AppTheme

server/
‚îî‚îÄ‚îÄ index.js                      # Express + Socket.IO + Firebase Admin
```

---

## ‚öôÔ∏è –í–ê–ñ–õ–ò–í–Ü –ö–û–ù–°–¢–ê–ù–¢–ò –¢–ê –ü–†–ê–í–ò–õ–ê

```dart
// config/app_config.dart
class AppConfig {
  static String get serverUrl =>
    dotenv.env['SERVER_URL'] ?? 'https://pproject-y.onrender.com';
  static bool firebaseAvailable = false; // –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —É main()
}

// main.dart ‚Äî –±—ñ–ª—å—à–µ –ù–ï –º–∞—î:
// const String serverUrl = '...'   ‚Üê –í–ò–î–ê–õ–ï–ù–û
// bool firebaseAvailable = false;  ‚Üê –ü–ï–†–ï–ú–Ü–©–ï–ù–û –≤ AppConfig

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É —Ñ–∞–π–ª–∞—Ö:
// AppConfig.serverUrl              –∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ serverUrl
// AppConfig.firebaseAvailable      –∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ firebaseAvailable

// date_utils.dart ‚Äî –∫–ª–∞—Å –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è ChatDateUtils (–ù–ï DateUtils!)
// –ü—Ä–∏—á–∏–Ω–∞: –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ –≤–±—É–¥–æ–≤–∞–Ω–∏–º Flutter DateUtils –∑ material.dart
// –Ü–º–ø–æ—Ä—Ç: import 'utils/date_utils.dart' as AppDate;
// –í–∏–∫–ª–∏–∫: AppDate.ChatDateUtils.formatTime(ts)
```

```javascript
// server/index.js ‚Äî –∫–ª—é—á–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
const io = new Server(server, {
  cors: { origin: "*" },
  maxHttpBufferSize: 1e7,  // 10MB (–±—É–ª–æ 60MB ‚Äî DoS —Ä–∏–∑–∏–∫)
  pingTimeout: 60000,
  pingInterval: 25000,
});

// Graceful shutdown (–≤ –∫—ñ–Ω—Ü—ñ —Ñ–∞–π–ª—É)
process.on('SIGTERM', shutdown);
process.on('SIGINT', shutdown);
```

---

## üé® –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê (theme.dart)

```dart
// –ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ SignalColors —ñ AppSizes ‚Äî –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç–∏!
SignalColors.primary        // #2B5CE6 ‚Äî –∞–∫—Ü–µ–Ω—Ç, –∫–Ω–æ–ø–∫–∏
SignalColors.appBackground  // #111113 ‚Äî —Ñ–æ–Ω scaffold
SignalColors.surface        // #1A1B1D ‚Äî AppBar, –∫–∞—Ä—Ç–∫–∏
SignalColors.elevated       // #252528 ‚Äî –º–æ–¥–∞–ª–∏, –º–µ–Ω—é
SignalColors.outgoing       // #2B5CE6 ‚Äî –º–æ—ó –±—É–ª—å–±–∞—à–∫–∏
SignalColors.incoming       // #2C2C2E ‚Äî —á—É–∂—ñ –±—É–ª—å–±–∞—à–∫–∏
SignalColors.textPrimary    // #FFFFFF
SignalColors.textSecondary  // #8E8E9A
SignalColors.danger         // —á–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –ø–æ–º–∏–ª–æ–∫/–≤–∏–¥–∞–ª–µ–Ω–Ω—è
SignalColors.online         // –∑–µ–ª–µ–Ω–∏–π –¥–ª—è –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å—É

AppSizes.navBarHeight       // 72
AppSizes.bubbleRadius       // 18
AppSizes.avatarRadiusMedium // 27
AppSizes.avatarRadiusLarge  // 36
AppSizes.inputHeight        // –º—ñ–Ω. –≤–∏—Å–æ—Ç–∞ –ø–æ–ª—è –≤–≤–æ–¥—É
AppSizes.actionButtonSize   // –∫–Ω–æ–ø–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
```

---

## üî• FIRESTORE –°–¢–†–£–ö–¢–£–†–ê

```
users/{username}
  username, avatarUrl, createdAt
  [–ü–õ–ê–ù –§1] passwordHash, bio, online, lastSeen

chats/{chatId}
  type: "dm"                        ‚Üê –≥—Ä—É–ø–∏ –ø–ª–∞–Ω—É—î—Ç—å—Å—è —É –§–∞–∑—ñ 2
  participants: [username1, username2]
  lastMessage: { text, sender, timestamp, read }

chats/{chatId}/messages/{messageId}
  text, sender, senderAvatar, type  ‚Üê "text" | "image" | "voice"
  timestamp, read, edited, editedAt
  replyTo: { id, text, sender }
  reactions: { "‚ù§Ô∏è": ["user1"], "üëç": ["user2"] }
  audioUrl, audioDuration
  [–ü–õ–ê–ù –§2] status: "sent"|"delivered"|"read"
  [–ü–õ–ê–ù –§2] fileUrl, filename, fileSize, mimeType

fcm_tokens/{token}
  username, updatedAt
  ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –Ω–µ–≤–∞–ª—ñ–¥–Ω—ñ (registration-token-not-registered)
```

---

## üîå SOCKET.IO ‚Äî SocketService –º–µ—Ç–æ–¥–∏

```dart
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¢–Ü–õ–¨–ö–ò —á–µ—Ä–µ–∑ SocketService ‚Äî –Ω–µ socket.emit –Ω–∞–ø—Ä—è–º—É!
final _socketSvc = SocketService();

_socketSvc.init()
_socketSvc.connect() / disconnect()
_socketSvc.joinChat(chatId)
_socketSvc.leaveChat(chatId)
_socketSvc.sendMessage(data)
_socketSvc.deleteMessage(msgId, chatId)
_socketSvc.editMessage(msgId, text, user, chatId)
_socketSvc.addReaction(msgId, emoji, user, chatId)
_socketSvc.emitTyping(username, chatId)
_socketSvc.markRead(chatId, username)
_socketSvc.registerToken(token, username)
_socketSvc.requestHistory(chatId)
_socketSvc.on(event, handler)
_socketSvc.isConnected                  // bool
_socketSvc.socket                       // IO.Socket (–ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –¥–ª—è debug)
_socketSvc.dispose()
```

### Socket –ø–æ–¥—ñ—ó —Å–µ—Ä–≤–µ—Ä ‚Üí –∫–ª—ñ—î–Ω—Ç
| –ü–æ–¥—ñ—è | –î–∞–Ω—ñ |
|-------|------|
| `receive_message` | messageData |
| `load_history` | message[] |
| `message_deleted` | messageId |
| `message_edited` | { messageId, newText, edited } |
| `reaction_updated` | { messageId, reactions } |
| `display_typing` | { username, chatId } |
| `message_read_update` | data |

---

## üåê REST API

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –û–ø–∏—Å |
|-------|----------|------|
| POST | `/auth` | { username, avatarUrl } ‚Üí { status, user } |
| POST | `/upload` | —Ñ–æ—Ç–æ ‚Üí { url } |
| POST | `/upload-audio` | –∞—É–¥—ñ–æ ‚Üí { url } |
| GET | `/search_users?q=&myUsername=` | –ø–æ—à—É–∫ |
| POST | `/get_or_create_dm` | { myUsername, otherUsername } ‚Üí chat |
| GET | `/get_user_chats?username=` | —Å–ø–∏—Å–æ–∫ —á–∞—Ç—ñ–≤ (Windows) |
| GET | `/ping` | health check |

---

## ‚úÖ –©–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û (17 —Ñ—É–Ω–∫—Ü—ñ–π)

- [x] –ü—Ä–∏–≤–∞—Ç–Ω—ñ —á–∞—Ç–∏ (DM) ‚Äî Firestore + Socket.IO
- [x] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –Ω—ñ–∫–Ω–µ–π–º + –∞–≤–∞—Ç–∞—Ä
- [x] –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ç–æ (Firebase Storage)
- [x] –ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è + Waveform –ø–ª–µ—î—Ä (CustomPainter)
- [x] –†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (toggle emoji)
- [x] Reply + swipe-to-reply
- [x] –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- [x] Signal Dark UI (SignalColors + AppSizes)
- [x] –ü–ª–∞–≤–∞—é—á–∞ –æ–≤–∞–ª—å–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- [x] FCM Push (—Ç—ñ–ª—å–∫–∏ —É—á–∞—Å–Ω–∏–∫–∞–º —á–∞—Ç—É ‚úÖ FIXED)
- [x] Windows –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (HTTP fallback)
- [x] Shorebird OTA (—É SettingsScreen)
- [x] Typing indicator –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
- [x] –†–æ–∑–¥—ñ–ª—é–≤–∞—á—ñ –¥–∞—Ç + Scroll Date Overlay
- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –º–µ–Ω—é Signal-—Å—Ç–∏–ª—å
- [x] –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [x] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è 50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (request_history)

---

## ‚úÖ –í–ò–ö–û–ù–ê–ù–ò–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì (v2.3.5)

| # | –ó–∞–¥–∞—á–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---|--------|-----------|
| –ë1 | Push-—Ñ—ñ–ª—å—Ç—Ä –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö | ‚úÖ where("username","in",recipients) + –∞–≤—Ç–æ-–≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ |
| –ë2 | –î—É–±–ª—ñ–∫–∞—Ç LoginScreen | ‚úÖ –¢—ñ–ª—å–∫–∏ login_screen.dart |
| –ë3 | maxHttpBufferSize 60MB‚Üí10MB | ‚úÖ 1e7 + pingTimeout |
| –ë4 | Graceful shutdown | ‚úÖ SIGTERM + SIGINT |
| –†1 | –†–æ–∑–±–∏—Ç–æ main.dart | ‚úÖ 6 —Ñ–∞–π–ª—ñ–≤ —É widgets/ |
| –†2 | ChatDateUtils | ‚úÖ utils/date_utils.dart (—ñ–º–ø–æ—Ä—Ç as AppDate) |
| –†3 | SocketService | ‚úÖ services/socket_service.dart singleton |
| –†4 | AppConfig + .env | ‚úÖ config/app_config.dart + flutter_dotenv |
| –†5 | firebaseAvailable ‚Üí AppConfig | ‚úÖ AppConfig.firebaseAvailable |
| –†6 | voice_recorder.dart | ‚úÖ –ü–æ–º–∏–ª–æ–∫ –Ω–µ–º–∞—î |

---

## üêõ –í–Ü–î–û–ú–Ü –ü–†–û–ë–õ–ï–ú–ò (–∞–∫—Ç—É–∞–ª—å–Ω—ñ)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ (–§–∞–∑–∞ 1):
1. **–ù–µ–º–∞—î –ø–∞—Ä–æ–ª—è** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —Ç—ñ–ª—å–∫–∏ –ø–æ –Ω—ñ–∫–Ω–µ–π–º—É
2. **Socket –±–µ–∑ JWT** ‚Äî –±—É–¥—å-—Ö—Ç–æ –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å

### üü° –î—Ä—ñ–±–Ω—ñ:
3. **–ù–µ–º–∞—î —Å—Ç–∞—Ç—É—Å—ñ–≤ ‚úì‚úì** ‚Äî –ø–æ–ª–µ isRead —î –∞–ª–µ –∑–∞–≤–∂–¥–∏ false
4. **–ù–µ–º–∞—î –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó** ‚Äî —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
5. **–ù–µ–º–∞—î –≥—Ä—É–ø–æ–≤–∏—Ö —á–∞—Ç—ñ–≤**

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–Ü –ù–Æ–ê–ù–°–ò (—â–æ–± –Ω–µ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏)

```
1. DateUtils ‚Üí ChatDateUtils
   –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ Flutter material.dart!
   import 'utils/date_utils.dart' as AppDate;
   AppDate.ChatDateUtils.formatTime(ts)

2. SettingsScreen ‚Äî –ù–ï –¥–æ–¥–∞–≤–∞—Ç–∏ leading: IconButton —É AppBar
   –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —è–∫ –≤–∫–ª–∞–¥–∫–∞ IndexedStack ‚Üí Navigator.pop = —á–æ—Ä–Ω–∏–π –µ–∫—Ä–∞–Ω

3. serverUrl ‚Äî –ù–ï const (getter –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ const)
   final String serverUrl = AppConfig.serverUrl; ‚Üê –∞–±–æ –Ω–∞–ø—Ä—è–º—É AppConfig.serverUrl

4. dotenv.load ‚Äî –û–ë–û–í'–Ø–ó–ö–û–í–û try/catch
   try { await dotenv.load(fileName: '.env'); } catch (_) {}
   –ë–µ–∑ —Ü—å–æ–≥–æ ‚Äî —á–æ—Ä–Ω–∏–π –µ–∫—Ä–∞–Ω —è–∫—â–æ .env –≤—ñ–¥—Å—É—Ç–Ω—ñ–π

5. socket.emit ‚Äî –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞–ø—Ä—è–º—É
   –¢—ñ–ª—å–∫–∏ _socketSvc.–º–µ—Ç–æ–¥–ù–∞–∑–≤–∞()
   –í–∏–Ω—è—Ç–æ–∫: _socketSvc.socket.emit('debug_log', ...) ‚Äî —Ç—ñ–ª—å–∫–∏ –¥–ª—è debug

6. .env —É pubspec.yaml assets ‚Äî –û–ë–û–í'–Ø–ó–ö–û–í–û
   assets:
     - .env
     - shorebird.yaml
```

---

## üì± –û–°–û–ë–õ–ò–í–û–°–¢–Ü –ü–õ–ê–¢–§–û–†–ú

```dart
if (!AppConfig.firebaseAvailable) {
  // Windows: HTTP /get_user_chats + Socket.IO request_history
  // _localMessages: List<Map> –∑–∞–º—ñ—Å—Ç—å StreamBuilder
} else {
  // Android/iOS: Firestore StreamBuilder + FCM push + Shorebird OTA
}
```

---

## üì¶ PUBSPEC ‚Äî –ö–õ–Æ–ß–û–í–Ü –ó–ê–õ–ï–ñ–ù–û–°–¢–Ü

```yaml
socket_io_client: ^3.1.4
firebase_core: ^4.4.0
firebase_messaging: ^16.1.1
cloud_firestore: ^6.1.2
firebase_storage: ^12.1.2
flutter_dotenv: ^5.1.0
shorebird_code_push: ^2.0.5
image_picker: ^1.2.1
record: ^6.2.0
audioplayers: ^6.5.1
vibration: ^3.1.6
permission_handler: ^12.0.1
path_provider: ^2.1.1
shared_preferences: ^2.5.4
http: ^1.6.0

flutter:
  assets:
    - .env
    - shorebird.yaml
```

---

## üóì –ù–ê–°–¢–£–ü–ù–Ü –ö–†–û–ö–ò (–§–∞–∑–∞ 1 ‚Äî –ë–µ–∑–ø–µ–∫–∞)

```
–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:
  npm install jsonwebtoken bcryptjs express-rate-limit helmet morgan joi

1. POST /auth ‚Äî –¥–æ–¥–∞—Ç–∏ password, bcrypt.hash(password, 12)
2. –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ JWT token (7d) + refreshToken (30d)
3. Middleware verifyJWT –¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤
4. POST /refresh –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
5. Socket.IO auth: io.use((socket, next) => { jwt.verify(...) })
6. Flutter: –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è —É LoginScreen + AuthService + Dio interceptor
7. Rate limiting: /auth 10req/15—Ö–≤, /upload 30req/—Ö–≤
```

---

## üí° –Ø–ö –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–¢–ò –¶–ï–ô –§–ê–ô–õ

```
–ù–æ–≤–∏–π —á–∞—Ç ‚Üí –≤—Å—Ç–∞–≤–∏—Ç–∏ CONTEXT.md ‚Üí –¥–æ–¥–∞—Ç–∏ –¢–Ü–õ–¨–ö–ò –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ñ–∞–π–ª:

"–¥–æ–¥–∞—Ç–∏ JWT"              ‚Üí server/index.js
"–ø—Ä–æ–±–ª–µ–º–∞ —É —á–∞—Ç—ñ"         ‚Üí main.dart
"–ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è"      ‚Üí home_screen.dart
"–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"            ‚Üí settings_screen.dart
"–ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤"      ‚Üí search_screen.dart
"–∫–æ–ª—å–æ—Ä–∏ / —Ç–µ–º–∏"          ‚Üí theme.dart
"–∞—É–¥—ñ–æ –ø–ª–µ—î—Ä"             ‚Üí audio_player_widget.dart
"—Å–æ–∫–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞"          ‚Üí services/socket_service.dart
"–¥–∞—Ç–∞/—á–∞—Å"                ‚Üí utils/date_utils.dart
"–∫–æ–Ω—Ñ—ñ–≥ / env"            ‚Üí config/app_config.dart
```