# üóÇ MESSENGER Y ‚Äî PROJECT CONTEXT v2.4.3
> –í—Å—Ç–∞–≤–ª—è–π —Ü–µ–π —Ñ–∞–π–ª –ø–µ—Ä—à–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —É –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ.
> –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –¥–æ–¥–∞–≤–∞–π –¢–Ü–õ–¨–ö–ò —Ç–æ–π —Ñ–∞–π–ª, –∑ —è–∫–∏–º –∑–∞—Ä–∞–∑ –ø—Ä–∞—Ü—é—î—à.

---

## üì¶ –°–¢–ï–ö

| –®–∞—Ä | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è |
|-----|-----------|
| –ö–ª—ñ—î–Ω—Ç | Flutter 3.x (Android, iOS, Windows) |
| –°–µ—Ä–≤–µ—Ä | Node.js 20 + Express 5 + Socket.IO 4.8 (—Ö–æ—Å—Ç–∏–Ω–≥: Render) |
| –ë–î | Firebase Firestore |
| –°—Ö–æ–≤–∏—â–µ | Firebase Storage |
| Push | FCM multicast (—Ñ—ñ–ª—å—Ç—Ä –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö ‚úÖ) |
| Auth | –ù—ñ–∫–Ω–µ–π–º + –ø–∞—Ä–æ–ª—å + JWT ‚úÖ (–§–∞–∑–∞ 1 –≤–∏–∫–æ–Ω–∞–Ω–∞) |
| OTA | Shorebird Code Push |
| Real-time | Socket.IO rooms + Firestore StreamBuilder |
| Config | flutter_dotenv (.env —Ñ–∞–π–ª) |

---

## üóÇ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–Ü–í (–∞–∫—Ç—É–∞–ª—å–Ω–∞ v2.4.3)

```
client/
‚îú‚îÄ‚îÄ .env                           # SERVER_URL=https://pproject-y.onrender.com
‚îú‚îÄ‚îÄ pubspec.yaml
‚îî‚îÄ‚îÄ lib/
    ‚îú‚îÄ‚îÄ config/
    ‚îÇ   ‚îî‚îÄ‚îÄ app_config.dart        # AppConfig.serverUrl (–∑ .env) + AppConfig.firebaseAvailable
    ‚îú‚îÄ‚îÄ services/
    ‚îÇ   ‚îú‚îÄ‚îÄ socket_service.dart    # SocketService singleton ‚Äî init({required String token})
    ‚îÇ   ‚îî‚îÄ‚îÄ auth_service.dart      # AuthService ‚Äî login, logout, getToken, refreshToken
    ‚îú‚îÄ‚îÄ utils/
    ‚îÇ   ‚îî‚îÄ‚îÄ date_utils.dart        # ChatDateUtils: formatTime, dateLabel, parseDate, isSameDay
    ‚îú‚îÄ‚îÄ widgets/
    ‚îÇ   ‚îú‚îÄ‚îÄ message_bubble.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ swipe_to_reply.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ typing_indicator.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ date_separator.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ reply_preview.dart
    ‚îÇ   ‚îî‚îÄ‚îÄ reaction_widgets.dart
    ‚îú‚îÄ‚îÄ main.dart                  # MyApp, main(), ChatScreen, AppColors, GlassBox
    ‚îú‚îÄ‚îÄ home_screen.dart           # HomeScreen + _OvalNavBar
    ‚îú‚îÄ‚îÄ login_screen.dart          # LoginScreen (–Ω—ñ–∫–Ω–µ–π–º + –ø–∞—Ä–æ–ª—å)
    ‚îú‚îÄ‚îÄ search_screen.dart         # SearchUserScreen
    ‚îú‚îÄ‚îÄ settings_screen.dart       # SettingsScreen ‚Äî OTA, logout
    ‚îú‚îÄ‚îÄ signal_context_menu.dart   # SignalContextMenu overlay
    ‚îú‚îÄ‚îÄ audio_player_widget.dart   # AudioMessagePlayer + WaveformPainter
    ‚îú‚îÄ‚îÄ voice_recorder.dart        # VoiceRecorder widget
    ‚îî‚îÄ‚îÄ theme.dart                 # SignalColors, AppSizes, AppTheme

server/
‚îî‚îÄ‚îÄ index.js                      # Express + Socket.IO + Firebase Admin (v2.1.2)
```

---

## ‚öôÔ∏è –í–ê–ñ–õ–ò–í–Ü –ö–û–ù–°–¢–ê–ù–¢–ò –¢–ê –ü–†–ê–í–ò–õ–ê

```dart
// config/app_config.dart
class AppConfig {
  static String get serverUrl =>
    dotenv.env['SERVER_URL'] ?? 'https://pproject-y.onrender.com';
  static bool firebaseAvailable = false;
}

// services/auth_service.dart ‚Äî –ù–û–í–ò–ô –§–ê–ô–õ (–§–∞–∑–∞ 1)
// AuthService.login(username, password, avatarUrl?)  ‚Üí Map —Ç–æ–∫–µ–Ω–∏ + —é–∑–µ—Ä
// AuthService.getToken()       ‚Üí String? (JWT access token)
// AuthService.getRefreshToken() ‚Üí String?
// AuthService.refreshToken()   ‚Üí String? (–æ–Ω–æ–≤–ª—é—î access token)
// AuthService.logout()         ‚Üí –æ—á–∏—â–∞—î –≤—Å—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ
// AuthService.isLoggedIn()     ‚Üí bool
// AuthService.getSavedUsername() ‚Üí String?

// services/socket_service.dart ‚Äî –û–ù–û–í–õ–ï–ù–û (–§–∞–∑–∞ 1)
// init() —Ç–µ–ø–µ—Ä –í–ò–ú–ê–ì–ê–Ñ —Ç–æ–∫–µ–Ω:
// _socketSvc.init(token: token ?? '');
// –í–∏–∫–ª–∏–∫ —É main.dart initSocket():
//   final token = await AuthService.getToken();
//   _socketSvc.init(token: token ?? '');

// date_utils.dart ‚Äî –∫–ª–∞—Å –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è ChatDateUtils (–ù–ï DateUtils!)
// –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ Flutter material.dart!
// –Ü–º–ø–æ—Ä—Ç: import 'utils/date_utils.dart' as AppDate;
// –í–∏–∫–ª–∏–∫: AppDate.ChatDateUtils.formatTime(ts)
```

```javascript
// server/index.js v2.4.3 ‚Äî –∫–ª—é—á–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
const JWT_SECRET = process.env.JWT_SECRET || "change_me_in_production_please";

// –û–ë–û–í'–Ø–ó–ö–û–í–û –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ JWT_SECRET —É Render ‚Üí Environment Variables!

app.set('trust proxy', 1); // Render –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î proxy ‚Äî –±–µ–∑ —Ü—å–æ–≥–æ rate-limit –Ω–µ –ø—Ä–∞—Ü—é—î

const io = new Server(server, {
  cors: { origin: "*" },
  maxHttpBufferSize: 1e7,
  pingTimeout: 60000,
  pingInterval: 25000,
});

// Socket.IO auth middleware ‚Äî –≤—ñ–¥—Ö–∏–ª—è—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
io.use((socket, next) => {
  const token = socket.handshake.auth?.token;
  jwt.verify(token, JWT_SECRET); // –∫–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É —è–∫—â–æ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π
  socket.username = decoded.username; // username –±–µ—Ä–µ—Ç—å—Å—è –∑ JWT, –Ω–µ –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞!
});

// sender —É send_message ‚Äî –±–µ—Ä–µ—Ç—å—Å—è –∑ socket.username (JWT), –Ω–µ –∑ data.sender!
// –¶–µ –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –ø—ñ–¥—Ä–æ–±–∫–∏ —ñ–º–µ–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞.
```

---

## üîê –ê–í–¢–û–†–ò–ó–ê–¶–Ü–Ø (–§–∞–∑–∞ 1 ‚Äî –≤–∏–∫–æ–Ω–∞–Ω–æ)

```
POST /auth  { username, password, avatarUrl? }
  ‚Üí { status: "created"|"found", token, refreshToken, user }

POST /refresh  { refreshToken }
  ‚Üí { token }  (–Ω–æ–≤–∏–π access token)

JWT: access token ‚Äî 7 –¥–Ω—ñ–≤, refresh token ‚Äî 30 –¥–Ω—ñ–≤
bcrypt rounds: 12

–ó–∞—Ö–∏—â–µ–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (verifyJWT middleware):
  POST /upload
  POST /upload-audio
  GET  /search_users
  POST /get_or_create_dm
  GET  /get_user_chats

Flutter ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–∞:
  HTTP:   headers: {'Authorization': 'Bearer $token'}
  Socket: IO.OptionBuilder().setAuth({'token': token})
```

---

## ‚è±Ô∏è RATE LIMITING (–§–∞–∑–∞ 1 ‚Äî –≤–∏–∫–æ–Ω–∞–Ω–æ)

```
POST /auth        ‚Üí 10 req / 15 —Ö–≤–∏–ª–∏–Ω
POST /upload      ‚Üí 30 req / —Ö–≤–∏–ª–∏–Ω—É
POST /upload-audio ‚Üí 30 req / —Ö–≤–∏–ª–∏–Ω—É
GET  /search_users ‚Üí 60 req / —Ö–≤–∏–ª–∏–Ω—É
```

---

## üé® –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê (theme.dart)

```dart
SignalColors.primary        // #2B5CE6
SignalColors.appBackground  // #111113
SignalColors.surface        // #1A1B1D
SignalColors.elevated       // #252528
SignalColors.outgoing       // #2B5CE6
SignalColors.incoming       // #2C2C2E
SignalColors.textPrimary    // #FFFFFF
SignalColors.textSecondary  // #8E8E9A
SignalColors.danger         // —á–µ—Ä–≤–æ–Ω–∏–π
SignalColors.online         // –∑–µ–ª–µ–Ω–∏–π

AppSizes.navBarHeight       // 72
AppSizes.bubbleRadius       // 18
AppSizes.avatarRadiusMedium // 27
AppSizes.avatarRadiusLarge  // 36
```

---

## üî• FIRESTORE –°–¢–†–£–ö–¢–£–†–ê

```
users/{username}
  username, avatarUrl, createdAt, passwordHash ‚úÖ (–§–∞–∑–∞ 1)
  [–ü–õ–ê–ù –§2] bio, online, lastSeen

chats/{chatId}
  type: "dm"
  participants: [username1, username2]
  lastMessage: { text, sender, timestamp, read }

chats/{chatId}/messages/{messageId}
  text, sender, senderAvatar, type
  timestamp, read, edited, editedAt
  replyTo: { id, text, sender }
  reactions: { "‚ù§Ô∏è": ["user1"] }
  audioUrl, audioDuration
  [–ü–õ–ê–ù –§2] status: "sent"|"delivered"|"read"

fcm_tokens/{token}
  username, updatedAt  ‚Üê –Ω–µ–≤–∞–ª—ñ–¥–Ω—ñ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ ‚úÖ
```

---

## üîå SOCKET.IO ‚Äî SocketService –º–µ—Ç–æ–¥–∏

```dart
// –¢–Ü–õ–¨–ö–ò —á–µ—Ä–µ–∑ SocketService!
final _socketSvc = SocketService();

_socketSvc.init(token: token)   // ‚Üê –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ JWT —Ç–æ–∫–µ–Ω
_socketSvc.connect() / disconnect()
_socketSvc.joinChat(chatId)
_socketSvc.leaveChat(chatId)
_socketSvc.sendMessage(data)    // sender –±–µ—Ä–µ—Ç—å—Å—è –∑ JWT –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
_socketSvc.deleteMessage(msgId, chatId)
_socketSvc.editMessage(msgId, text, user, chatId)
_socketSvc.addReaction(msgId, emoji, user, chatId)
_socketSvc.emitTyping(username, chatId)
_socketSvc.markRead(chatId, username)
_socketSvc.registerToken(token, username)
_socketSvc.requestHistory(chatId)
_socketSvc.on(event, handler)
_socketSvc.isConnected
_socketSvc.dispose()
```

---

## üåê REST API

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | Auth | –û–ø–∏—Å |
|-------|----------|------|------|
| POST | `/auth` | ‚ùå | { username, password, avatarUrl? } ‚Üí { token, refreshToken, user } |
| POST | `/refresh` | ‚ùå | { refreshToken } ‚Üí { token } |
| POST | `/upload` | ‚úÖ JWT | —Ñ–æ—Ç–æ ‚Üí { url } |
| POST | `/upload-audio` | ‚úÖ JWT | –∞—É–¥—ñ–æ ‚Üí { url } |
| GET | `/search_users?q=&myUsername=` | ‚úÖ JWT | –ø–æ—à—É–∫ |
| POST | `/get_or_create_dm` | ‚úÖ JWT | ‚Üí chat |
| GET | `/get_user_chats?username=` | ‚úÖ JWT | —Å–ø–∏—Å–æ–∫ —á–∞—Ç—ñ–≤ (Windows) |
| GET | `/ping` | ‚ùå | health check |

---

## ‚úÖ –©–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û (19 —Ñ—É–Ω–∫—Ü—ñ–π)

- [x] –ü—Ä–∏–≤–∞—Ç–Ω—ñ —á–∞—Ç–∏ (DM) ‚Äî Firestore + Socket.IO
- [x] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è ‚Äî –Ω—ñ–∫–Ω–µ–π–º + **–ø–∞—Ä–æ–ª—å (bcrypt)** + **JWT** ‚úÖ –§–∞–∑–∞ 1
- [x] **Rate limiting + Helmet + Morgan + Joi –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** ‚úÖ –§–∞–∑–∞ 1
- [x] **Socket.IO auth middleware (JWT)** ‚úÖ –§–∞–∑–∞ 1
- [x] –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ç–æ (Firebase Storage)
- [x] –ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è + Waveform –ø–ª–µ—î—Ä
- [x] –†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (toggle emoji)
- [x] Reply + swipe-to-reply
- [x] –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- [x] Signal Dark UI (SignalColors + AppSizes)
- [x] –ü–ª–∞–≤–∞—é—á–∞ –æ–≤–∞–ª—å–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- [x] FCM Push (—Ç—ñ–ª—å–∫–∏ —É—á–∞—Å–Ω–∏–∫–∞–º ‚úÖ)
- [x] Windows –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (HTTP fallback)
- [x] Shorebird OTA
- [x] Typing indicator
- [x] –†–æ–∑–¥—ñ–ª—é–≤–∞—á—ñ –¥–∞—Ç + Scroll Date Overlay
- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –º–µ–Ω—é Signal-—Å—Ç–∏–ª—å
- [x] –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [x] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è 50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

## ‚úÖ –í–ò–ö–û–ù–ê–ù–ò–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –Ü –§–ê–ó–ò

| # | –ó–∞–¥–∞—á–∞ | –í–µ—Ä—Å—ñ—è |
|---|--------|--------|
| –ë1 | Push-—Ñ—ñ–ª—å—Ç—Ä –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö | v2.3.5 |
| –ë2 | –î—É–±–ª—ñ–∫–∞—Ç LoginScreen | v2.3.5 |
| –ë3 | maxHttpBufferSize 60MB‚Üí10MB | v2.3.5 |
| –ë4 | Graceful shutdown | v2.3.5 |
| –†1‚Äì–†6 | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ main.dart, utils, services, config | v2.3.5 |
| –§1-1 | bcrypt –ø–∞—Ä–æ–ª—ñ —É /auth | v2.4.3 |
| –§1-2 | JWT access + refresh —Ç–æ–∫–µ–Ω–∏ | v2.4.3 |
| –§1-3 | verifyJWT middleware | v2.4.3 |
| –§1-4 | Socket.IO JWT auth | v2.4.3 |
| –§1-5 | Rate limiting (auth/upload/search) | v2.4.3 |
| –§1-6 | Helmet + Morgan + Joi + trust proxy | v2.4.3 |
| –§1-7 | AuthService (Flutter) | v2.4.3 |
| –§1-8 | JWT —É –≤—Å—ñ—Ö HTTP –∑–∞–ø–∏—Ç–∞—Ö | v2.4.3 |
| –§1-9 | –ö–∏—Ä–∏–ª–∏—Ü—è —É –Ω—ñ–∫–Ω–µ–π–º–∞—Ö | v2.4.3 |

---

## üêõ –í–Ü–î–û–ú–Ü –ü–†–û–ë–õ–ï–ú–ò (–∞–∫—Ç—É–∞–ª—å–Ω—ñ)

### üü° –î—Ä—ñ–±–Ω—ñ:
1. **–ù–µ–º–∞—î —Å—Ç–∞—Ç—É—Å—ñ–≤ ‚úì‚úì** ‚Äî –ø–æ–ª–µ read —î –∞–ª–µ –ª–æ–≥—ñ–∫–∞ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
2. **–ù–µ–º–∞—î –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó** ‚Äî —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
3. **–ù–µ–º–∞—î –≥—Ä—É–ø–æ–≤–∏—Ö —á–∞—Ç—ñ–≤**

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–Ü –ù–Æ–ê–ù–°–ò

```
1. DateUtils ‚Üí ChatDateUtils
   import 'utils/date_utils.dart' as AppDate;
   AppDate.ChatDateUtils.formatTime(ts)

2. SettingsScreen ‚Äî –ù–ï –¥–æ–¥–∞–≤–∞—Ç–∏ leading: IconButton —É AppBar
   –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —è–∫ –≤–∫–ª–∞–¥–∫–∞ IndexedStack ‚Üí Navigator.pop = —á–æ—Ä–Ω–∏–π –µ–∫—Ä–∞–Ω

3. serverUrl ‚Äî –ù–ï const (getter –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ const)

4. dotenv.load ‚Äî –û–ë–û–í'–Ø–ó–ö–û–í–û try/catch

5. socket.emit ‚Äî —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ _socketSvc.–º–µ—Ç–æ–¥–ù–∞–∑–≤–∞()

6. SocketService.init() ‚Äî –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ token:
   final token = await AuthService.getToken();
   _socketSvc.init(token: token ?? '');

7. HTTP –∑–∞–ø–∏—Ç–∏ –¥–æ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤ ‚Äî –û–ë–û–í'–Ø–ó–ö–û–í–û –∑–∞–≥–æ–ª–æ–≤–æ–∫:
   headers: {'Authorization': 'Bearer ${token ?? ''}'}

8. JWT_SECRET ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —É Render ‚Üí Environment Variables!
   –ù–µ –∑–∞–ª–∏—à–∞—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π "change_me_in_production_please"

9. sender —É Socket –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö –±–µ—Ä–µ—Ç—å—Å—è –∑ JWT (socket.username)
   –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ sender –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞ ‚Äî —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
```

---

## üì± –û–°–û–ë–õ–ò–í–û–°–¢–Ü –ü–õ–ê–¢–§–û–†–ú

```dart
if (!AppConfig.firebaseAvailable) {
  // Windows: HTTP /get_user_chats + Socket.IO request_history
  // _localMessages: List<Map> –∑–∞–º—ñ—Å—Ç—å StreamBuilder
} else {
  // Android/iOS: Firestore StreamBuilder + FCM push + Shorebird OTA
}
```

---

## üì¶ PUBSPEC ‚Äî –ö–õ–Æ–ß–û–í–Ü –ó–ê–õ–ï–ñ–ù–û–°–¢–Ü

```yaml
socket_io_client: ^3.1.4
firebase_core: ^4.4.0
firebase_messaging: ^16.1.1
cloud_firestore: ^6.1.2
firebase_storage: ^12.1.2
flutter_dotenv: ^5.1.0
dio: ^5.4.0                  # ‚Üê –î–û–î–ê–ù–û —É –§–∞–∑—ñ 1
shorebird_code_push: ^2.0.5
image_picker: ^1.2.1
record: ^6.2.0
audioplayers: ^6.5.1
vibration: ^3.1.6
permission_handler: ^12.0.1
path_provider: ^2.1.1
shared_preferences: ^2.5.4
http: ^1.6.0
```

## SERVER ‚Äî –ó–ê–õ–ï–ñ–ù–û–°–¢–Ü (package.json)

```json
"bcryptjs": "^3.0.3",
"cors": "^2.8.6",
"express": "^5.2.1",
"firebase-admin": "^13.6.1",
"helmet": "^8.x",
"joi": "^17.x",
"jsonwebtoken": "^9.x",
"morgan": "^1.x",
"express-rate-limit": "^7.x",
"multer": "^2.0.2",
"socket.io": "^4.8.3"
```

---

## üí° –Ø–ö –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–¢–ò –¶–ï–ô –§–ê–ô–õ

```
–ù–æ–≤–∏–π —á–∞—Ç ‚Üí –≤—Å—Ç–∞–≤–∏—Ç–∏ CONTEXT.md ‚Üí –¥–æ–¥–∞—Ç–∏ –¢–Ü–õ–¨–ö–ò –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ñ–∞–π–ª:

"JWT / –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è"       ‚Üí services/auth_service.dart
"–¥–æ–¥–∞—Ç–∏ JWT –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ"   ‚Üí server/index.js
"–ø—Ä–æ–±–ª–µ–º–∞ —É —á–∞—Ç—ñ"         ‚Üí main.dart
"–ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è"      ‚Üí home_screen.dart
"–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"            ‚Üí settings_screen.dart
"–ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤"      ‚Üí search_screen.dart
"–∫–æ–ª—å–æ—Ä–∏ / —Ç–µ–º–∏"          ‚Üí theme.dart
"–∞—É–¥—ñ–æ –ø–ª–µ—î—Ä"             ‚Üí audio_player_widget.dart
"—Å–æ–∫–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞"          ‚Üí services/socket_service.dart
"–¥–∞—Ç–∞/—á–∞—Å"                ‚Üí utils/date_utils.dart
"–∫–æ–Ω—Ñ—ñ–≥ / env"            ‚Üí config/app_config.dart
```